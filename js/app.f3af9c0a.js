(function(){var t={9889:function(t,e,r){"use strict";var n=r(144),o=r(3726),a=r(7024),s=r(1819),l=r(3102),i=r(7894),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(o.Z,{attrs:{id:"app"}},[e("LoadingOverlay"),e("NavDrawer",{ref:"navDrawer"}),e("NavBar",{on:{"toggle-drawer":function(e){return t.$refs.navDrawer.toggle()}}}),e(l.Z,{staticStyle:{position:"relative"}},[e("external-background"),e("div",{staticStyle:{"overflow-y":"auto",position:"absolute",top:"0 !important",width:"100%",height:"100%"}},[e(s.Z,{attrs:{fluid:"",id:"main-container"}},[e(i.Z,{attrs:{justify:"center"}},[e(a.Z,{style:{"max-width":t.$vuetify.breakpoint.thresholds.md+"px"},attrs:{align:"center"}},[e("router-view")],1)],1)],1)],1)],1)],1)},u=[],d=r(655),m=r(1929),f=r(9759),p=r(4741),v=r(9767),h=r(7935),g=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(v.Z,{attrs:{value:t.$store.state.loading,"z-index":1e3}},[e(h.Z,{attrs:{indeterminate:"",size:"64"}})],1),e(v.Z,{attrs:{value:t.$store.state.error,"z-index":1001}},[e(f.Z,{staticClass:"bo",attrs:{prominent:"",type:"error",elevation:"3"}},[e(i.Z,{attrs:{align:"center"}},[e(a.Z,{staticClass:"grow font-weight-medium"},[t._v(t._s(t.$store.state.errorNote))]),e(a.Z,{staticClass:"shrink"},[e(p.Z,{attrs:{color:"error lighten-1",elevation:"5"},on:{click:t.restartApp}},[t._v("Restart App")])],1)],1)],1)],1)],1)},y=[];let b=class extends m.w3{restartApp(){const t=new URL(window.location.href);t.hash="",t.pathname="",window.location.href=t.href}};b=(0,d.gn)([m.wA],b);var k=b,x=k,w=r(1001),Z=(0,w.Z)(x,g,y,!1,null,null,null),_=Z.exports,$=r(9088),O=r(7970),q=r(1667),T=r(3444),C=r(1543),A=r(5308),S=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(A.Z,{attrs:{app:"",clipped:t.$vuetify.breakpoint.lgAndUp},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e(O.Z,{attrs:{dense:""}},[e(q.Z,{attrs:{to:"/",color:t.itemcolor()}},[e(T.Z,[e($.Z,{attrs:{color:"secondary"}},[t._v("mdi-bookmark")])],1),e(C.km,[e(C.V9,{attrs:{varian:""}},[t._v("Index")])],1)],1),t.$store.state.athome?e(q.Z,{attrs:{to:"/home",color:t.itemcolor()}},[e(T.Z,[e($.Z,{attrs:{color:"secondary"}},[t._v("mdi-bookmark")])],1),e(C.km,[e(C.V9,[t._v("Home")])],1)],1):t._e(),e(q.Z,{attrs:{to:"/impressum",color:t.itemcolor()}},[e(T.Z,[e($.Z,{attrs:{color:"secondary"}},[t._v("mdi-bookmark")])],1),e(C.km,[e(C.V9,[t._v("Impressum")])],1)],1)],1)],1)},N=[];let P=class extends m.w3{visible=!1;itemcolor(){return this.$vuetify.theme.dark?"secondary accent-4":"secondary darken-4"}toggle(){this.visible=!this.visible}close(){this.visible=!1}};P=(0,d.gn)([m.wA],P);var j=P,E=j,M=(0,w.Z)(E,S,N,!1,null,null,null),D=M.exports,L=r(3625),I=r(5078),F=r(3816),B=r(624),H=r(2520),J=r(2515),U=r(6827),z=r(3845),Q=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(L.Z,{attrs:{app:"","clipped-right":"",color:"primary",dark:"","clipped-left":t.$vuetify.breakpoint.lgAndUp,id:"menubar"}},[e(I.Z,{on:{click:function(e){return e.stopPropagation(),t.$emit("toggle-drawer")}}}),e(z.qW,[t._v("krueckl.de")]),e(J.Z),e(B.Z,{attrs:{"offset-y":"",transition:"slide-y-transition",bottom:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:n}){return[e(p.Z,t._g(t._b({attrs:{fab:"",small:"",color:"primary lighten-1"}},"v-btn",n,!1),r),[e($.Z,[t._v("mdi-application-cog-outline")])],1)]}}])},[e(F.Z,[e(O.Z,[e(q.Z,[e(T.Z,[e(U.Z,{attrs:{color:"secondary"},model:{value:t.$vuetify.theme.dark,callback:function(e){t.$set(t.$vuetify.theme,"dark",e)},expression:"$vuetify.theme.dark"}})],1),e(C.V9,{on:{click:function(e){t.$vuetify.theme.dark=!t.$vuetify.theme.dark}}},[t._v(t._s(t.$t("darktheme")))])],1),e(q.Z,[e(H.Z,{attrs:{items:Object.keys(t.$i18n.messages).map((e=>({value:e,text:t.$i18n.messages[e].lang}))),label:t.$t("language")},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}})],1)],1)],1)],1)],1)},V=[];let R=class extends m.w3{lang="de"};R=(0,d.gn)([m.wA],R);var W=R,G=W,K=(0,w.Z)(G,Q,V,!1,null,null,null),X=K.exports,Y=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"animation",attrs:{id:"animation"}})},tt=[];let et=class extends m.w3{};et=(0,d.gn)([m.wA],et);var rt=et,nt=rt,ot=(0,w.Z)(nt,Y,tt,!1,null,null,null),at=ot.exports;let st=class extends m.w3{};st=(0,d.gn)([(0,m.wA)({name:"App",components:{LoadingOverlay:_,NavDrawer:D,NavBar:X,ExternalBackground:at}})],st);var lt=st,it=lt,ct=(0,w.Z)(it,c,u,!1,null,null,null),ut=ct.exports,dt=r(5205);(0,dt.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var mt=r(8345),ft=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"index"})},pt=[];let vt=class extends m.w3{};vt=(0,d.gn)([m.wA],vt);var ht=vt,gt=ht,yt=(0,w.Z)(gt,ft,pt,!1,null,null,null),bt=yt.exports,kt=r(4170),xt=r(1013),wt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"home"},["connected"!==t.$store.state.mqtt.state?e(F.Z,{staticClass:"pt-5 pb-5"},[e(p.Z,{on:{click:function(e){return t.$store.commit("connectMQTT")}}},[t._v(" Connect ")])],1):t._e(),"connected"===t.$store.state.mqtt.state?e(F.Z,[e("h2",{staticClass:"pt-2"},[t._v(t._s(t.$t("rollos")))]),e(s.Z,[e(i.Z,t._l(t.$store.state.rollos,(function(r,n){return e(a.Z,{key:n},[e(kt.Z,[t._v(t._s(n))]),e(xt.Z,{attrs:{"thumb-label":"always",vertical:""},on:{change:function(e){return t.setrollo(n,r.value)}},model:{value:r.value,callback:function(e){t.$set(r,"value",e)},expression:"value.value"}})],1)})),1),e(i.Z,[e(a.Z,[e(p.Z,{attrs:{color:"primary"},on:{click:function(e){return t.$store.commit("setrollos","up")}}},[t._v(" Up ")])],1),e(a.Z,[e(p.Z,{attrs:{color:"primary"},on:{click:function(e){return t.$store.commit("setrollos","down")}}},[t._v(" Down ")])],1),e(a.Z,[e(p.Z,{attrs:{color:"primary"},on:{click:function(e){return t.$store.commit("setrollos","cat")}}},[t._v(" Cat ")])],1)],1)],1)],1):t._e(),"connected"===t.$store.state.mqtt.state?e(F.Z,{staticClass:"mt-2"},[e("h2",{staticClass:"pt-2"},[t._v(t._s(t.$t("lichter")))]),t._l(t.$store.state.lichter,(function(r,n){return e("div",{key:n},[e(U.Z,{staticClass:"mt-0 ml-8",attrs:{loading:r.updating,label:n},on:{change:function(e){return t.setlight(n,r.value)}},model:{value:r.value,callback:function(e){t.$set(r,"value",e)},expression:"value.value"}})],1)}))],2):t._e(),"connected"===t.$store.state.mqtt.state?e(F.Z,{staticClass:"mt-2"},[e("Plotly",{attrs:{data:t.$store.state.temp,layout:t.plotlayout}})],1):t._e(),"connected"===t.$store.state.mqtt.state?e(F.Z,{staticClass:"mt-2"},[e("Plotly",{attrs:{data:t.$store.state.humidity,layout:t.plotlayout}})],1):t._e()],1)},Zt=[],_t=r(8343);let $t=class extends m.w3{plotlayout={margin:{l:40,r:20,t:20,b:60},legend:{yanchor:"top",y:.99,xanchor:"left",x:.01}};setlight(t,e){this.$store.commit("setlight",{key:t,value:e})}setrollo(t,e){this.$store.commit("setrollo",{key:t,value:e})}mounted(){"?"===this.$store.state.mqtt.state&&this.$store.state.athome&&this.$store.commit("connectMQTT")}};$t=(0,d.gn)([(0,m.wA)({components:{Plotly:_t.Plotly}})],$t);var Ot=$t,qt=Ot,Tt=(0,w.Z)(qt,wt,Zt,!1,null,null,null),Ct=Tt.exports;const At=[{path:"/",name:"Index",component:bt,meta:{title:"krueckl.de",metaTags:[{property:"???",content:"???"}]}},{path:"/home",name:"Home",component:Ct,meta:{title:"Home control",metaTags:[{property:"home"}]}},{path:"/impressum",name:"Impressum",component:()=>r.e(42).then(r.bind(r,1618))}];var St=At;n["default"].use(mt.ZP);const Nt=new mt.ZP({mode:"hash",base:"/",routes:St});Nt.beforeEach(((t,e,r)=>{const n=t.matched.slice().reverse().find((t=>t.meta&&t.meta.title)),o=t.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags));e.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags));if(n&&(document.title=n.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((t=>t.parentNode.removeChild(t))),!o)return r();o.meta.metaTags.map((t=>{const e=document.createElement("meta");return Object.keys(t).forEach((r=>{e.setAttribute(r,t[r])})),e.setAttribute("data-vue-router-controlled",""),e})).forEach((t=>document.head.appendChild(t))),r()}));var Pt=Nt,jt=r(8986),Et=r(6403);n["default"].use(jt.Z);var Mt=new jt.Z({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},themes:{light:{primary:"#35d6d0",secondary:"#ff43bb",accent:Et.Z.shades.black,error:Et.Z.red.accent3,background:Et.Z.shades.white,drawerbackground:"#d9dede",cardbackground:"#ffffff"},dark:{primary:"#35d6d0",secondary:"#ff35d5",background:Et.Z.shades.black,drawerbackground:"#212626",cardbackground:"#212626"}}}}),Dt=r(7152);function Lt(){const t=r(2528),e={};return t.keys().forEach((r=>{const n=r.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const o=n[1];e[o]=t(r)}})),e}function It(){const t=void 0!==navigator.languages?navigator.languages[0]:navigator.language;if(!t)return;const e=t.trim().split(/-|_/)[0];return e}n["default"].use(Dt.Z);var Ft=new Dt.Z({locale:It(),fallbackLocale:"en",messages:Lt()}),Bt=r(629);let Ht={host:"",port:1234,clientID:"?",user:"",password:""},Jt=!1;try{let t=localStorage.getItem("mqttcfg");null!==t&&(Ht=JSON.parse(t),Jt=!0)}catch{}const Ut={error:!1,loading:!1,loadingList:[],errorNote:"",athome:Jt,mqtt:{...Ht,client:void 0,state:"?"},rollos:{},lichter:{},humidity:[],temp:[]};var zt=r(8295);n["default"].use(Bt.ZP);let Qt=new Bt.ZP.Store({state:Ut,mutations:{connectMQTT(){Ut.mqtt.client=new zt.Client(Ut.mqtt.host,Ut.mqtt.port,Ut.mqtt.clientID),Ut.mqtt.state="connecting",Ut.mqtt.client.onMessageArrived=t=>{Qt.commit("onMQTTmessage",t)},Ut.mqtt.client.onConnectionLost=t=>{0!==t.errorCode&&(Ut.mqtt.state="?")};var t={useSSL:!0,userName:Ut.mqtt.user,password:Ut.mqtt.password,onSuccess:()=>{Ut.mqtt.client.subscribe("#"),Ut.mqtt.state="connected"},onFailure:t=>{Ut.mqtt.state="?"}};Ut.mqtt.client.connect(t)},onMQTTmessage(t,e){let r=e.topic.split("/"),o=r[0],a=r[1],s=a.substr(a.indexOf("-")+1),l=a.substr(0,a.indexOf("-")),i=e.payloadString;if("value"===o){let e=parseInt(i);"on"===i&&(e=!0),"off"===i&&(e=!1),a&&!isNaN(e)&&("rollo"===l&&n["default"].set(t.rollos,s,{value:e,updating:!1}),"licht"===l&&n["default"].set(t.lichter,s,{value:e,updating:!1}))}if("humidity"===o||"temp"===o){let e=JSON.parse(i),r=Object.keys(e).map((t=>{let e=new Date(parseInt(t));return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)})),s=Object.values(e),l={x:r,y:s,mode:"lines",name:a};if("humidity"===o){let e=t.humidity.map((t=>t.name)).indexOf(a);-1==e?t.humidity.push(l):n["default"].set(t.humidity,e,l)}if("temp"===o){let e=t.temp.map((t=>t.name)).indexOf(a);-1==e?t.temp.push(l):n["default"].set(t.temp,e,l)}}},setlight(t,e){const r=e.key;n["default"].set(Ut.lichter,r,{value:t.lichter[r].value,updating:!0}),Ut.mqtt.client.publish("command/licht-"+r,e.value?"on":"off")},setrollo(t,e){const r=e.key,n=e.value.toString();Ut.mqtt.client.publish("command/rollo-"+r,n)},setrollos(t,e){Ut.mqtt.client.publish("command/rollos",e)}}});var Vt=Qt,Rt=r(3464),Wt=r.n(Rt);function Gt(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}));return e}const Kt=window.location.search;if(null!==Kt)try{let t=window.atob(Kt.replace("?","")),e=JSON.parse(t);e["clientID"]=Gt(),localStorage.setItem("mqttcfg",JSON.stringify(e))}catch{}n["default"].use(Wt()),n["default"].config.productionTip=!1;const Xt=new n["default"]({router:Pt,vuetify:Mt,i18n:Ft,store:Vt,render:t=>t(ut)}).$mount("#app");window.matchMedia&&(Xt.$vuetify.theme.dark=window.matchMedia("(prefers-color-scheme: dark)").matches),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{Xt.$vuetify.theme.dark=t.matches}))},2528:function(t,e,r){var n={"./de.json":9929,"./en.json":790};function o(t){var e=a(t);return r(e)}function a(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=a,t.exports=o,o.id=2528},9929:function(t){"use strict";t.exports=JSON.parse('{"lang":"Deutsch","language":"Sprache","hello":"Hallo {user}!","darktheme":"Dunkles Farbschema","message":"Nachricht","title":"Titel","rollos":"Rollos","lichter":"Lichter"}')},790:function(t){"use strict";t.exports=JSON.parse('{"lang":"English","language":"Language","hello":"Hello {user}!","darktheme":"Dark Theme","message":"Message","title":"Title","rollos":"Blinds","lichter":"Lights"}')}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,a){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],a=t[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&a||s>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[i])}))?n.splice(i--,1):(l=!1,a<s&&(s=a));if(l){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/impressum.6ce3a8f4.js"}}(),function(){r.miniCssF=function(t){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="krueckl.de:";r.l=function(n,o,a,s){if(t[n])t[n].push(o);else{var l,i;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+a){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",e+a),l.src=n),t[n]=[o];var m=function(e,r){l.onerror=l.onload=null,clearTimeout(f);var o=t[n];if(delete t[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(t){return t(r)})),e)return e(r)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={143:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=t[e]=[r,n]}));n.push(o[2]=a);var s=r.p+r.u(e),l=new Error,i=function(n){if(r.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,o[1](l)}};r.l(s,i,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,s=n[0],l=n[1],i=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(i)var u=i(r)}for(e&&e(n);c<s.length;c++)a=s[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},n=self["webpackChunkkrueckl_de"]=self["webpackChunkkrueckl_de"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(9889)}));n=r.O(n)})();